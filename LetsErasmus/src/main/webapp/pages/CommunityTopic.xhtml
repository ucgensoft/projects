<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html" template="/pages/Template.xhtml">

	<ui:define name="head">
		<meta name="robots" content="noindex" />
		<link rel="stylesheet" type="text/css"
			href="#{webApplication.urlPrefix}/static/css/place/common_o2.css?ver=#{webApplication.staticFileVersion}" />
		<link rel="stylesheet" type="text/css"
			href="#{webApplication.urlPrefix}/static/css/conversation.css?ver=#{webApplication.staticFileVersion}" />
		<link rel="stylesheet" type="text/css"
			href="#{webApplication.urlPrefix}/static/css/community.css?ver=#{webApplication.staticFileVersion}" />

	</ui:define>

	<ui:define name="body">
		<main id="site-content" role="main">
		<div class="community-section">
			<div class="community-content">
				<div class="row">
					<div
						class="js-messaging-react-container messaging-thread-container">
						<div>
							<div id="divTopicDetail">
								<div style="margin-top: 10px; border-bottom: 3px solid #dce0e0;">
									<a class="_j1qvyg"
										href="#{webApplication.urlPrefix}/community/#{communityGroupController.communityGroup.subUrl}/#{communityTopic.subUrl}"
										target="_blank">
										<h2 style="margin-bottom: 5px; word-wrap: break-word;">
											<strong>#{communityTopicController.communityTopic.title}</strong>
										</h2>
									</a>
								</div>
								<div style="overflow: hidden; border-bottom: 1px solid #dce0e0; padding-bottom:10px; ">
										<a href="#{webApplication.getUrlTemplateProfile(communityTopicController.communityTopic.userId)}" target="_blank">
											<div class="topic-detail-avatar"
												style="width: 10%; margin-top: 10px; float: left;">
												<div id="divUserImagePart" class="nav-top--avatar">
													<input id="hiddenActiveUserProfileImageUrl" type="hidden"
														value="#{webApplication.getUserPhotoUrl(communityTopicController.communityTopic.userId, communityTopicController.communityTopic.user.profilePhotoId,'small')}" />
													<div id="divHeaderUserProfileImage" class="avatar--img"
														style="background-size: cover; width: 100%; height: 100%; background-image: url(#{webApplication.getUserPhotoUrl(communityTopicController.communityTopic.userId, communityTopicController.communityTopic.user.profilePhotoId,'small')});">
													</div>
												</div>
											</div>
										</a> 
										<a class="_j1qvyg" href="#{webApplication.getUrlTemplateProfile(communityTopicController.communityTopic.userId)}" target="_blank">
											<div class="topic-creater">
												<div>#{communityTopicController.communityTopic.user.firstName}</div>
											</div>
										</a>
										<div style="width: 90%; float: right; margin-top: 10px; word-wrap: break-word;">
											<div style="white-space: pre-line">
												#{communityTopicController.communityTopic.description}
											</div>
											<div style="margin-top: 5px">
												#{communityTopicController.formatDate(communityTopicController.communityTopic.createdDate , "dd MMM, yyyy")}
											</div>
										</div>
								</div>
							</div>

							<ui:repeat var="message"
								value="#{communityTopicController.messageList}"
								varStatus="status">
								
								<div style="overflow: hidden; border-bottom: 1px solid #dce0e0; padding-bottom:10px;">
										<a href="#{webApplication.getUrlTemplateProfile(message.userId)}" target="_blank">
											<div class="topic-detail-avatar"
												style="width: 10%; margin-top: 10px; float: left;">
												<div id="divUserImagePart" class="nav-top--avatar">
													<input id="hiddenActiveUserProfileImageUrl" type="hidden"
														value="#{webApplication.getUserPhotoUrl(message.userId, message.user.profilePhotoId,'small')}" />
													<div id="divHeaderUserProfileImage" class="avatar--img"
														style="background-size: cover; width: 100%; height: 100%; background-image: url(#{webApplication.getUserPhotoUrl(message.userId, message.user.profilePhotoId,'small')});">
													</div>
												</div>
											</div>
										</a> 
										<a class="_j1qvyg" href="#{webApplication.getUrlTemplateProfile(message.userId)}" target="_blank">
											<div class="topic-creater">
												<div>#{message.user.firstName}</div>
											</div>
										</a>
										<div style="width: 90%; float: right; margin-top: 10px;">
											<div style="white-space: pre-line">#{message.description}</div>
											<div style="margin-top: 5px">
												#{communityTopicController.formatDate(message.createdDate , "dd MMM, yyyy")}
											</div>
										</div>
								</div>

							</ui:repeat>
							<div style="margin-top: 10px;">
								<ui:fragment rendered="#{webApplication.user != null}">
									<div>
										<textarea id="txtReply" rows="6"></textarea>
									</div>
								</ui:fragment>
								<div style="margin-top: 5px;">
									<input class="btn btn-primary" id="btnReplyBottom"
										type="button" value="Reply" ng-click="ctrl.btnReplyClick()" />
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		</main>
		<script>
			var globalCommunityTopicId = #{communityTopicController.communityTopic.id};
		</script>
		<script
			src="#{webApplication.urlPrefix}/static/js/angular/service/community_service.js?ver=#{webApplication.staticFileVersion}"></script>
		<script
			src="#{webApplication.urlPrefix}/static/js/angular/controller/community_topic_controller.js?ver=#{webApplication.staticFileVersion}"></script>
	</ui:define>
</ui:composition>